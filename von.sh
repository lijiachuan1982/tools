#! /bin/bash

echo "##########################################################"
echo "################## Check VON Network IP ##################"
echo "##########################################################"
if [ -z $1 ]
then
  echo "Please specify the VON network IP address"
else

  echo "##########################################################"
  echo "################## Create New Workspace ##################"
  echo "##########################################################"

  mkdir workspace

  cd ~/workspace

  echo "##########################################################"
  echo "##################### Clone VON Code #####################"
  echo "##########################################################"

  git clone https://github.com/bcgov/von-network.git

  cd ~/workspace/von-network

  echo "##########################################################"
  echo "####################### Build Code #######################"
  echo "##########################################################"

  ./manage build

  echo "##########################################################"
  echo "################### Start VON Network ####################"
  echo "##########################################################"

  ./manage start $1 WEB_SERVER_HOST_PORT=80 "LEDGER_INSTANCE_NAME=My Ledger" &
fi
